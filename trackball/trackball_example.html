
<!-- saved from url=(0078)http://math.hws.edu/graphicsbook/source/webgl/cube-with-trackball-rotator.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><div class="line-gutter-backdrop"></div><table><tbody><tr><td class="line-number" value="1"></td><td class="line-content"><span class="html-doctype">&lt;!DOCTYPE html&gt;</span></td></tr><tr><td class="line-number" value="2"></td><td class="line-content"><span class="html-tag">&lt;meta <span class="html-attribute-name">charset</span>="<span class="html-attribute-value">UTF-8</span>"&gt;</span></td></tr><tr><td class="line-number" value="3"></td><td class="line-content"><span class="html-tag">&lt;html&gt;</span></td></tr><tr><td class="line-number" value="4"></td><td class="line-content"><span class="html-tag">&lt;head&gt;</span></td></tr><tr><td class="line-number" value="5"></td><td class="line-content"><span class="html-tag">&lt;title&gt;</span>TrackballRotator Demo<span class="html-tag">&lt;/title&gt;</span></td></tr><tr><td class="line-number" value="6"></td><td class="line-content"><span class="html-tag">&lt;style&gt;</span></td></tr><tr><td class="line-number" value="7"></td><td class="line-content">    body {</td></tr><tr><td class="line-number" value="8"></td><td class="line-content">        background-color: #EEEEEE;</td></tr><tr><td class="line-number" value="9"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="10"></td><td class="line-content"><span class="html-tag">&lt;/style&gt;</span></td></tr><tr><td class="line-number" value="11"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="12"></td><td class="line-content"><span class="html-comment">&lt;!--</span></td></tr><tr><td class="line-number" value="13"></td><td class="line-content"><span class="html-comment">    An example using a TrackballRotator, defined in TrackballRotator.js,</span></td></tr><tr><td class="line-number" value="14"></td><td class="line-content"><span class="html-comment">    to implement rotation by mouse.</span></td></tr><tr><td class="line-number" value="15"></td><td class="line-content"><span class="html-comment">--&gt;</span></td></tr><tr><td class="line-number" value="16"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="17"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">type</span>="<span class="html-attribute-value">x-shader/x-vertex</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">vshader-source</span>"&gt;</span></td></tr><tr><td class="line-number" value="18"></td><td class="line-content">    attribute vec3 a_coords;</td></tr><tr><td class="line-number" value="19"></td><td class="line-content">    uniform mat4 modelviewProjection;</td></tr><tr><td class="line-number" value="20"></td><td class="line-content">    void main() {</td></tr><tr><td class="line-number" value="21"></td><td class="line-content">        vec4 coords = vec4(a_coords,1.0);</td></tr><tr><td class="line-number" value="22"></td><td class="line-content">        gl_Position = modelviewProjection * coords;</td></tr><tr><td class="line-number" value="23"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="24"></td><td class="line-content"><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="25"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="26"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">type</span>="<span class="html-attribute-value">x-shader/x-fragment</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">fshader-source</span>"&gt;</span></td></tr><tr><td class="line-number" value="27"></td><td class="line-content">    #ifdef GL_FRAGMENT_PRECISION_HIGH</td></tr><tr><td class="line-number" value="28"></td><td class="line-content">       precision highp float;</td></tr><tr><td class="line-number" value="29"></td><td class="line-content">    #else</td></tr><tr><td class="line-number" value="30"></td><td class="line-content">       precision mediump float;</td></tr><tr><td class="line-number" value="31"></td><td class="line-content">    #endif</td></tr><tr><td class="line-number" value="32"></td><td class="line-content">    uniform vec4 color;</td></tr><tr><td class="line-number" value="33"></td><td class="line-content">    void main() {</td></tr><tr><td class="line-number" value="34"></td><td class="line-content">        gl_FragColor = color;</td></tr><tr><td class="line-number" value="35"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="36"></td><td class="line-content"><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="37"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="38"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="http://math.hws.edu/graphicsbook/source/webgl/trackball-rotator.js">trackball-rotator.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="39"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="http://math.hws.edu/graphicsbook/source/webgl/gl-matrix-min.js">gl-matrix-min.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="40"></td><td class="line-content"><span class="html-tag">&lt;script&gt;</span></td></tr><tr><td class="line-number" value="41"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="42"></td><td class="line-content">"use strict";</td></tr><tr><td class="line-number" value="43"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="44"></td><td class="line-content">var gl;   // The webgl context.</td></tr><tr><td class="line-number" value="45"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="46"></td><td class="line-content">var a_coords_loc;          // Location of the a_coords attribute variable in the shader program.</td></tr><tr><td class="line-number" value="47"></td><td class="line-content">var a_coords_buffer;       // Buffer to hold the values for a_coords.</td></tr><tr><td class="line-number" value="48"></td><td class="line-content">var u_color;               // Location of the uniform specifying a color for the primitive.</td></tr><tr><td class="line-number" value="49"></td><td class="line-content">var u_modelviewProjection; // Location of the uniform matrix representing the combined transformation.</td></tr><tr><td class="line-number" value="50"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="51"></td><td class="line-content">var projection = mat4.create();  // projection matrix</td></tr><tr><td class="line-number" value="52"></td><td class="line-content">var modelviewProjection = mat4.create();  // combined matrix</td></tr><tr><td class="line-number" value="53"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="54"></td><td class="line-content">var rotator;  // A SimpleRotator object that lets the user rotate the view by mouse.</td></tr><tr><td class="line-number" value="55"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="56"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="57"></td><td class="line-content">/* Draws a WebGL primitive.  The first parameter must be one of the constants</td></tr><tr><td class="line-number" value="58"></td><td class="line-content"> * that specifiy primitives:  gl.POINTS, gl.LINES, gl.LINE_LOOP, gl.LINE_STRIP,</td></tr><tr><td class="line-number" value="59"></td><td class="line-content"> * gl.TRIANGLES, gl.TRIANGLE_STRIP, gl.TRIANGLE_FAN.  The second parameter must</td></tr><tr><td class="line-number" value="60"></td><td class="line-content"> * be an array of 4 numbers in the range 0.0 to 1.0, giving the RGBA color of</td></tr><tr><td class="line-number" value="61"></td><td class="line-content"> * the color of the primitive.  The third parameter must be an array of numbers.</td></tr><tr><td class="line-number" value="62"></td><td class="line-content"> * The length of the array must be amultiple of 3.  Each triple of numbers provides</td></tr><tr><td class="line-number" value="63"></td><td class="line-content"> * xyz-coords for one vertex for the primitive.  This assumes that u_color is the</td></tr><tr><td class="line-number" value="64"></td><td class="line-content"> * location of a color uniform in the shader program, a_coords_loc is the location of</td></tr><tr><td class="line-number" value="65"></td><td class="line-content"> * the coords attribute, and a_coords_buffer is a VBO for the coords attribute.</td></tr><tr><td class="line-number" value="66"></td><td class="line-content"> */</td></tr><tr><td class="line-number" value="67"></td><td class="line-content">function drawPrimitive( primitiveType, color, vertices ) {</td></tr><tr><td class="line-number" value="68"></td><td class="line-content">     gl.enableVertexAttribArray(a_coords_loc);</td></tr><tr><td class="line-number" value="69"></td><td class="line-content">     gl.bindBuffer(gl.ARRAY_BUFFER,a_coords_buffer);</td></tr><tr><td class="line-number" value="70"></td><td class="line-content">     gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STREAM_DRAW);</td></tr><tr><td class="line-number" value="71"></td><td class="line-content">     gl.uniform4fv(u_color, color);</td></tr><tr><td class="line-number" value="72"></td><td class="line-content">     gl.vertexAttribPointer(a_coords_loc, 3, gl.FLOAT, false, 0, 0);</td></tr><tr><td class="line-number" value="73"></td><td class="line-content">     gl.drawArrays(primitiveType, 0, vertices.length/3);</td></tr><tr><td class="line-number" value="74"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="75"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="76"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="77"></td><td class="line-content">/* Draws a colored cube, along with a set of coordinate axes.</td></tr><tr><td class="line-number" value="78"></td><td class="line-content"> * (Note that the use of the above drawPrimitive function is not an efficient</td></tr><tr><td class="line-number" value="79"></td><td class="line-content"> * way to draw with WebGL.  Here, the geometry is so simple that it doesn't matter.)</td></tr><tr><td class="line-number" value="80"></td><td class="line-content"> */</td></tr><tr><td class="line-number" value="81"></td><td class="line-content">function draw() { </td></tr><tr><td class="line-number" value="82"></td><td class="line-content">    gl.clearColor(0,0,0,1);</td></tr><tr><td class="line-number" value="83"></td><td class="line-content">    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);</td></tr><tr><td class="line-number" value="84"></td><td class="line-content">    </td></tr><tr><td class="line-number" value="85"></td><td class="line-content">    /* Set the value of projection to represent the projection transformation */</td></tr><tr><td class="line-number" value="86"></td><td class="line-content">    </td></tr><tr><td class="line-number" value="87"></td><td class="line-content">    mat4.perspective(projection, Math.PI/8, 1, 8, 12);</td></tr><tr><td class="line-number" value="88"></td><td class="line-content">    </td></tr><tr><td class="line-number" value="89"></td><td class="line-content">    /* Get the view matrix from the SimpleRotator object.</td></tr><tr><td class="line-number" value="90"></td><td class="line-content">       There is no modeling transformation in this program. */</td></tr><tr><td class="line-number" value="91"></td><td class="line-content">    </td></tr><tr><td class="line-number" value="92"></td><td class="line-content">    var modelview = rotator.getViewMatrix();</td></tr><tr><td class="line-number" value="93"></td><td class="line-content">        </td></tr><tr><td class="line-number" value="94"></td><td class="line-content">    /* Multiply the projection matrix times the modelview matrix to give the</td></tr><tr><td class="line-number" value="95"></td><td class="line-content">       combined transformation matrix, and send that to the shader program. */</td></tr><tr><td class="line-number" value="96"></td><td class="line-content">       </td></tr><tr><td class="line-number" value="97"></td><td class="line-content">    mat4.multiply( modelviewProjection, projection, modelview );</td></tr><tr><td class="line-number" value="98"></td><td class="line-content">    gl.uniformMatrix4fv(u_modelviewProjection, false, modelviewProjection );</td></tr><tr><td class="line-number" value="99"></td><td class="line-content">    </td></tr><tr><td class="line-number" value="100"></td><td class="line-content">    /* Draw the six faces of a cube, with different colors. */</td></tr><tr><td class="line-number" value="101"></td><td class="line-content">    </td></tr><tr><td class="line-number" value="102"></td><td class="line-content">    drawPrimitive( gl.TRIANGLE_FAN, [1,0,0,1], [ -1,-1,1, 1,-1,1, 1,1,1, -1,1,1 ]);</td></tr><tr><td class="line-number" value="103"></td><td class="line-content">    drawPrimitive( gl.TRIANGLE_FAN, [0,1,0,1], [ -1,-1,-1, -1,1,-1, 1,1,-1, 1,-1,-1 ]);</td></tr><tr><td class="line-number" value="104"></td><td class="line-content">    drawPrimitive( gl.TRIANGLE_FAN, [0,0,1,1], [ -1,1,-1, -1,1,1, 1,1,1, 1,1,-1 ]);</td></tr><tr><td class="line-number" value="105"></td><td class="line-content">    drawPrimitive( gl.TRIANGLE_FAN, [1,1,0,1], [ -1,-1,-1, 1,-1,-1, 1,-1,1, -1,-1,1 ]);</td></tr><tr><td class="line-number" value="106"></td><td class="line-content">    drawPrimitive( gl.TRIANGLE_FAN, [1,0,1,1], [ 1,-1,-1, 1,1,-1, 1,1,1, 1,-1,1 ]);</td></tr><tr><td class="line-number" value="107"></td><td class="line-content">    drawPrimitive( gl.TRIANGLE_FAN, [0,1,1,1], [ -1,-1,-1, -1,-1,1, -1,1,1, -1,1,-1 ]);</td></tr><tr><td class="line-number" value="108"></td><td class="line-content">    </td></tr><tr><td class="line-number" value="109"></td><td class="line-content">    /* Draw coordinate axes as thick colored lines that extend through the cube. */</td></tr><tr><td class="line-number" value="110"></td><td class="line-content">    </td></tr><tr><td class="line-number" value="111"></td><td class="line-content">    gl.lineWidth(4);</td></tr><tr><td class="line-number" value="112"></td><td class="line-content">    drawPrimitive( gl.LINES, [1,0,0,1], [ -2,0,0, 2,0,0] );</td></tr><tr><td class="line-number" value="113"></td><td class="line-content">    drawPrimitive( gl.LINES, [0,1,0,1], [ 0,-2,0, 0,2,0] );</td></tr><tr><td class="line-number" value="114"></td><td class="line-content">    drawPrimitive( gl.LINES, [0,0,1,1], [ 0,0,-2, 0,0,2] );</td></tr><tr><td class="line-number" value="115"></td><td class="line-content">    gl.lineWidth(1);</td></tr><tr><td class="line-number" value="116"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="117"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="118"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="119"></td><td class="line-content">/* Initialize the WebGL context.  Called from init() */</td></tr><tr><td class="line-number" value="120"></td><td class="line-content">function initGL() {</td></tr><tr><td class="line-number" value="121"></td><td class="line-content">    var prog = createProgram(gl,"vshader-source","fshader-source");</td></tr><tr><td class="line-number" value="122"></td><td class="line-content">    gl.useProgram(prog);</td></tr><tr><td class="line-number" value="123"></td><td class="line-content">    a_coords_loc =  gl.getAttribLocation(prog, "a_coords");</td></tr><tr><td class="line-number" value="124"></td><td class="line-content">    u_modelviewProjection = gl.getUniformLocation(prog, "modelviewProjection");</td></tr><tr><td class="line-number" value="125"></td><td class="line-content">    u_color =  gl.getUniformLocation(prog, "color");</td></tr><tr><td class="line-number" value="126"></td><td class="line-content">    a_coords_buffer = gl.createBuffer();</td></tr><tr><td class="line-number" value="127"></td><td class="line-content">    gl.enable(gl.DEPTH_TEST);</td></tr><tr><td class="line-number" value="128"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="129"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="130"></td><td class="line-content">/* Creates a program for use in the WebGL context gl, and returns the</td></tr><tr><td class="line-number" value="131"></td><td class="line-content"> * identifier for that program.  If an error occurs while compiling or</td></tr><tr><td class="line-number" value="132"></td><td class="line-content"> * linking the program, an exception of type String is thrown.  The error</td></tr><tr><td class="line-number" value="133"></td><td class="line-content"> * string contains the compilation or linking error.  If no error occurs,</td></tr><tr><td class="line-number" value="134"></td><td class="line-content"> * the program identifier is the return value of the function.</td></tr><tr><td class="line-number" value="135"></td><td class="line-content"> *    The second and third parameters are the id attributes for &lt;script&gt;</td></tr><tr><td class="line-number" value="136"></td><td class="line-content"> * elementst that contain the source code for the vertex and fragment</td></tr><tr><td class="line-number" value="137"></td><td class="line-content"> * shaders.</td></tr><tr><td class="line-number" value="138"></td><td class="line-content"> */</td></tr><tr><td class="line-number" value="139"></td><td class="line-content">function createProgram(gl, vertexShaderID, fragmentShaderID) {</td></tr><tr><td class="line-number" value="140"></td><td class="line-content">    function getTextContent( elementID ) {</td></tr><tr><td class="line-number" value="141"></td><td class="line-content">            // This nested function retrieves the text content of an</td></tr><tr><td class="line-number" value="142"></td><td class="line-content">            // element on the web page.  It is used here to get the shader</td></tr><tr><td class="line-number" value="143"></td><td class="line-content">            // source code from the script elements that contain it.</td></tr><tr><td class="line-number" value="144"></td><td class="line-content">        var element = document.getElementById(elementID);</td></tr><tr><td class="line-number" value="145"></td><td class="line-content">        var node = element.firstChild;</td></tr><tr><td class="line-number" value="146"></td><td class="line-content">        var str = "";</td></tr><tr><td class="line-number" value="147"></td><td class="line-content">        while (node) {</td></tr><tr><td class="line-number" value="148"></td><td class="line-content">            if (node.nodeType == 3) // this is a text node</td></tr><tr><td class="line-number" value="149"></td><td class="line-content">                str += node.textContent;</td></tr><tr><td class="line-number" value="150"></td><td class="line-content">            node = node.nextSibling;</td></tr><tr><td class="line-number" value="151"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="152"></td><td class="line-content">        return str;</td></tr><tr><td class="line-number" value="153"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="154"></td><td class="line-content">    try {</td></tr><tr><td class="line-number" value="155"></td><td class="line-content">        var vertexShaderSource = getTextContent( vertexShaderID );</td></tr><tr><td class="line-number" value="156"></td><td class="line-content">        var fragmentShaderSource = getTextContent( fragmentShaderID );</td></tr><tr><td class="line-number" value="157"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="158"></td><td class="line-content">    catch (e) {</td></tr><tr><td class="line-number" value="159"></td><td class="line-content">        throw "Error: Could not get shader source code from script elements.";</td></tr><tr><td class="line-number" value="160"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="161"></td><td class="line-content">    var vsh = gl.createShader( gl.VERTEX_SHADER );</td></tr><tr><td class="line-number" value="162"></td><td class="line-content">    gl.shaderSource(vsh,vertexShaderSource);</td></tr><tr><td class="line-number" value="163"></td><td class="line-content">    gl.compileShader(vsh);</td></tr><tr><td class="line-number" value="164"></td><td class="line-content">    if ( ! gl.getShaderParameter(vsh, gl.COMPILE_STATUS) ) {</td></tr><tr><td class="line-number" value="165"></td><td class="line-content">        throw "Error in vertex shader:  " + gl.getShaderInfoLog(vsh);</td></tr><tr><td class="line-number" value="166"></td><td class="line-content">     }</td></tr><tr><td class="line-number" value="167"></td><td class="line-content">    var fsh = gl.createShader( gl.FRAGMENT_SHADER );</td></tr><tr><td class="line-number" value="168"></td><td class="line-content">    gl.shaderSource(fsh, fragmentShaderSource);</td></tr><tr><td class="line-number" value="169"></td><td class="line-content">    gl.compileShader(fsh);</td></tr><tr><td class="line-number" value="170"></td><td class="line-content">    if ( ! gl.getShaderParameter(fsh, gl.COMPILE_STATUS) ) {</td></tr><tr><td class="line-number" value="171"></td><td class="line-content">       throw "Error in fragment shader:  " + gl.getShaderInfoLog(fsh);</td></tr><tr><td class="line-number" value="172"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="173"></td><td class="line-content">    var prog = gl.createProgram();</td></tr><tr><td class="line-number" value="174"></td><td class="line-content">    gl.attachShader(prog,vsh);</td></tr><tr><td class="line-number" value="175"></td><td class="line-content">    gl.attachShader(prog, fsh);</td></tr><tr><td class="line-number" value="176"></td><td class="line-content">    gl.linkProgram(prog);</td></tr><tr><td class="line-number" value="177"></td><td class="line-content">    if ( ! gl.getProgramParameter( prog, gl.LINK_STATUS) ) {</td></tr><tr><td class="line-number" value="178"></td><td class="line-content">       throw "Link error in program:  " + gl.getProgramInfoLog(prog);</td></tr><tr><td class="line-number" value="179"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="180"></td><td class="line-content">    return prog;</td></tr><tr><td class="line-number" value="181"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="182"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="183"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="184"></td><td class="line-content">/**</td></tr><tr><td class="line-number" value="185"></td><td class="line-content"> * initialization function that will be called when the page has loaded</td></tr><tr><td class="line-number" value="186"></td><td class="line-content"> */</td></tr><tr><td class="line-number" value="187"></td><td class="line-content">function init() {</td></tr><tr><td class="line-number" value="188"></td><td class="line-content">    var canvas;</td></tr><tr><td class="line-number" value="189"></td><td class="line-content">    try {</td></tr><tr><td class="line-number" value="190"></td><td class="line-content">        canvas = document.getElementById("webglcanvas");</td></tr><tr><td class="line-number" value="191"></td><td class="line-content">        gl = canvas.getContext("webgl") || </td></tr><tr><td class="line-number" value="192"></td><td class="line-content">                         canvas.getContext("experimental-webgl");</td></tr><tr><td class="line-number" value="193"></td><td class="line-content">        if ( ! gl ) {</td></tr><tr><td class="line-number" value="194"></td><td class="line-content">            throw "Browser does not support WebGL";</td></tr><tr><td class="line-number" value="195"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="196"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="197"></td><td class="line-content">    catch (e) {</td></tr><tr><td class="line-number" value="198"></td><td class="line-content">        document.getElementById("canvas-holder").innerHTML =</td></tr><tr><td class="line-number" value="199"></td><td class="line-content">            "&lt;p&gt;Sorry, could not get a WebGL graphics context.&lt;/p&gt;";</td></tr><tr><td class="line-number" value="200"></td><td class="line-content">        return;</td></tr><tr><td class="line-number" value="201"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="202"></td><td class="line-content">    try {</td></tr><tr><td class="line-number" value="203"></td><td class="line-content">        initGL();  // initialize the WebGL graphics context</td></tr><tr><td class="line-number" value="204"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="205"></td><td class="line-content">    catch (e) {</td></tr><tr><td class="line-number" value="206"></td><td class="line-content">        document.getElementById("canvas-holder").innerHTML =</td></tr><tr><td class="line-number" value="207"></td><td class="line-content">            "&lt;p&gt;Sorry, could not initialize the WebGL graphics context:" + e + "&lt;/p&gt;";</td></tr><tr><td class="line-number" value="208"></td><td class="line-content">        return;</td></tr><tr><td class="line-number" value="209"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="210"></td><td class="line-content">    rotator = new TrackballRotator(canvas, draw, 10);</td></tr><tr><td class="line-number" value="211"></td><td class="line-content">    draw();</td></tr><tr><td class="line-number" value="212"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="213"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="214"></td><td class="line-content"><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="215"></td><td class="line-content"><span class="html-tag">&lt;/head&gt;</span></td></tr><tr><td class="line-number" value="216"></td><td class="line-content"><span class="html-tag">&lt;body <span class="html-attribute-name">onload</span>="<span class="html-attribute-value">init()</span>"&gt;</span></td></tr><tr><td class="line-number" value="217"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="218"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span>A Cube with "Trackball" Mouse Rotation<span class="html-tag">&lt;/h2&gt;</span></td></tr><tr><td class="line-number" value="219"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="220"></td><td class="line-content"><span class="html-tag">&lt;p <span class="html-attribute-name">id</span>=<span class="html-attribute-value">message</span>&gt;</span>Drag your mouse on the cube to rotate it.<span class="html-tag">&lt;br&gt;</span></td></tr><tr><td class="line-number" value="221"></td><td class="line-content">(On a touch screen, you can use your finger.)<span class="html-tag">&lt;/p&gt;</span></td></tr><tr><td class="line-number" value="222"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="223"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="224"></td><td class="line-content"><span class="html-tag">&lt;noscript&gt;</span>&lt;hr&gt;&lt;h3&gt;This page requires Javascript and a web browser that supports WebGL&lt;/h3&gt;&lt;hr&gt;<span class="html-tag">&lt;/noscript&gt;</span></td></tr><tr><td class="line-number" value="225"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="226"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">id</span>="<span class="html-attribute-value">canvas-holder</span>"&gt;</span></td></tr><tr><td class="line-number" value="227"></td><td class="line-content">   <span class="html-tag">&lt;canvas <span class="html-attribute-name">width</span>=<span class="html-attribute-value">600</span> <span class="html-attribute-name">height</span>=<span class="html-attribute-value">600</span> <span class="html-attribute-name">id</span>="<span class="html-attribute-value">webglcanvas</span>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">background-color:red</span>"&gt;</span><span class="html-tag">&lt;/canvas&gt;</span></td></tr><tr><td class="line-number" value="228"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="229"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="230"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="231"></td><td class="line-content"><span class="html-tag">&lt;/body&gt;</span></td></tr><tr><td class="line-number" value="232"></td><td class="line-content"><span class="html-tag">&lt;/html&gt;</span></td></tr><tr><td class="line-number" value="233"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="234"></td><td class="line-content"><span class="html-end-of-file"></span></td></tr></tbody></table></body></html>